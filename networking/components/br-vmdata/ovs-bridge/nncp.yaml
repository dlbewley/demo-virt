---
apiVersion: nmstate.io/v1
kind: NodeNetworkConfigurationPolicy
metadata:
  name: br-vmdata
spec:
  desiredState:
    interfaces:
      - name: ens224
        ipv4:
          enabled: false
        ipv6:
          enabled: false
        state: up
        type: ethernet

      - name: br-vmdata
        description: |-
          A dedicated OVS bridge with ens224 as a port
          allowing all VLANs and untagged traffic.
          Networks will be mapped to this brige via ovn.bridge-mappings in NNCPs
          associated with creation of those networks via NetworkAttachmentDefinition.
        type: ovs-bridge
        state: up
        bridge:
          allow-extra-patch-ports: true
          options:
            stp: false
          port:
            - name: ens224
---
apiVersion: nmstate.io/v1
kind: NodeNetworkConfigurationPolicy
metadata:
  name: ovs-bridge-mapping-br-vmdata
  annotation:
    description: Map any localnet NAD which physicalNetworkName of 'vmdata-physnet' to br-vmdata
spec:
  desiredState:
    ovn:
      bridge-mappings:
        - localnet: vmdata-physnet
          bridge: br-vmdata
          state: present
